<template>
  <!-- more on expansion panels (and more examples): https://vuetifyjs.com/en/components/expansion-panels -->
  <!-- this is the example I copied: https://vuetifyjs.com/en/components/expansion-panels#expand -->
  <v-expansion-panel
    v-model="visibleList"
    expand
  >
    <!-- v-for index in N starts at 1... -->
    <!-- FYI can't use key as prop: https://stackoverflow.com/questions/47783396/access-key-from-child-component-in-vue -->
    <semester
      v-for="index in 12"
      :key="index-1"
      v-bind:index="index-1"
      v-bind:selectedSubjects="selectedSubjects"
      v-bind:allSubjects="subjects"
      v-bind:roadID="roadID"
      v-bind:isOpen="visibleList[index-1]"
      v-bind:baseYear="baseYear"
      @drag-class="$emit('drag-class',$event)"
      @drop-class="$emit('drop-class',$event)"
      @remove-class="$emit('remove-class', $event)"
      @click-class="$emit('click-class',$event)"
      >
    </semester>
  </v-expansion-panel>
</template>


<script>
import Semester from './Semester.vue'

export default {
  name: 'Semester',
  components: {
    'semester': Semester
  },
  props: ['selectedSubjects',"subjects","roadID","currentSemester"],
  data: function () { return {
      visibleList: Array(8).fill(true),
    }
  },
  computed: {
    baseYear: function() {
      var today=new Date();
      var currentYear=today.getFullYear();
      var baseYear=today.getMonth() >= 8 ? currentYear + 1 : currentYear
      return baseYear - Math.floor(this.currentSemester/3)
    }
  }
}
</script>


<style scoped>

</style>
